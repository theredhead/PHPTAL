<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>interface PHPTAL_Filter</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="PHPTAL - PHP Template Attribute Language"
HREF="index.html"><LINK
REL="UP"
TITLE="PHP Integration "
HREF="phpapi.html"><LINK
REL="PREVIOUS"
TITLE="interface PHPTAL_Cache"
HREF="phptal.cache.html"><LINK
REL="NEXT"
TITLE="interface PHPTAL_SourceResolver"
HREF="phptal.sourceresolver.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PHPTAL - PHP Template Attribute Language</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="phptal.cache.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>PHP Integration</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="phptal.sourceresolver.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="PHPTAL.FILTER"
>interface PHPTAL_Filter</A
></H1
><P
>&#13;The filter interface let you modify the template source (input) and the
template execution result (output) using your own filters object.&#13;</P
><P
>&#13;You can add more than one filter to the PHPTAL object, they will be executed in
the order they where added to the object.&#13;</P
><P
>&#13;You can add a filter object to PHPTAL using :&#13;</P
><P
></P
><UL
><LI
><P
>&#13;PHPTAL::addInputFilter() 

  </P
></LI
><LI
><P
>&#13;PHPTAL::addOutputFilter()

  </P
></LI
></UL
><P
>&#13;Example&#13;</P
><PRE
CLASS="PROGRAMLISTING"
>$tpl = new PHPTAL('file.html');
$tpl-&#62;addInputFilter($myFilter1); 
$tpl-&#62;addInputFilter($myFilter2);
// input filter may also be called as output filters 
$tpl-&#62;addOutputFilter($myFilter2); 
$tpl-&#62;addOutputFilter($myFilter3);</PRE
><P
>&#13;Note : input filters are called whenever a template source is required, output
filters are called only at the end of the main template execution unless a
cache manager break the main template <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>_process() </I
></SPAN
>usage.&#13;</P
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="PHPTAL.FILTER.FILTER"
>method filter</A
></H2
><P
>&#13;This method is called whenever the template has to filter some input or output
data, depending if the php intermediate code is up to date and if the Filter
was registered as an input filter or as an output filter.&#13;</P
><P
>&#13;Parameters&#13;</P
><P
>&#13;PHPTAL $tpl : the template object which requested this filter &#13;</P
><P
></P
><UL
><LI
><P
>&#13;string $data : the data to filter &#13;</P
></LI
><LI
><P
>&#13;int $mode : one of PHPTAL_PRE_FILTER or PHPTAL_POST_FILTER, this
parameter tells if the filter is called as an input filter or as an output
filter.&#13;</P
></LI
></UL
><P
>&#13;Return&#13;</P
><P
>&#13;string : the result of the filter or $data if the filter did nothing&#13;</P
><P
>&#13;Example&#13;</P
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN486"
></A
><P
><B
>Example 3. Filter implementation</B
></P
><PRE
CLASS="PROGRAMLISTING"
>&#60;?php
class MyFilter extends PHPTAL_Filter 
{ 
    function filter(&#38;$tpl, $data, $mode) 
    { 
        // just to present $mode usage for input/output filters 
        if ($mode == PHPTAL_POST_FILTER) { 
            return PEAR::raiseError( "MyFilter mustn't be used as a pre-filter' ); 
        }
        // remove html comments from template source 
        return preg_replace('/(&#60;\!--.*?--&#62;)/sm', '', $data); 
    } 
}

$tpl = new PHPTAL('mytemplate.html'); 
$tpl-&#62;addInputFilter(new MyFilter()); 
echo $tpl-&#62;execute();
?&#62;</PRE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="phptal.cache.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="phptal.sourceresolver.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>interface PHPTAL_Cache</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="phpapi.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>interface PHPTAL_SourceResolver</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>